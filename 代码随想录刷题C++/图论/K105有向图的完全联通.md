# 题目链接

https://kamacoder.com/problempage.php?pid=1177

## C++

```cpp
#include <iostream>
#include <vector>
#include <list>

using namespace std;

void dfs(const vector<list<int>>& graph, vector<bool>& visited, int key) {
	if (visited[key]) {   // 当前节点访问过
		return;
	}
	visited[key] = true;
	list<int> keys = graph[key];
	for (int key : keys) {
		dfs(graph, visited, key);
	}
}

int main() {
	int n, m, s, t;
	cin >> n >> m;   // 节点，边

	vector<list<int>> graph(n + 1);
	for (int i = 0; i < m; i++) {
		cin >> s >> t;
		graph[s].push_back(t);
	}

	vector<bool> visited(n + 1, false);
	dfs(graph, visited, 1);

	// 检查是否都访问到了
	for (int i = 1; i < n; i++) {
		if (visited[i] == false) {
			cout << -1 << endl;
            return 0;
		}
	}
	cout << 1 << endl;
}
```